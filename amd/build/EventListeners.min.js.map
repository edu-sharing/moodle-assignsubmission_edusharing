{"version":3,"file":"EventListeners.min.js","sources":["../src/EventListeners.js"],"sourcesContent":["\nexport const init = repoUrl => {\n    const onClick = () => {\n        window.console.log(\"click\");\n        window.addEventListener('message', function handleRepo(event) {\n            if (event.data.event === 'APPLY_NODE') {\n                const node = event.data.data;\n                window.win.close();\n                let filename = node.properties['cm:name'][0];\n                let extension = filename.split('.').pop();\n                if (!extension || extension.length === 0) {\n                    const mimeType = node.mimetype;\n                    const typeMap = {\n                        'image/jpeg': 'jpeg',\n                        'image/png': 'png',\n                        'image/gif': 'gif',\n                        'image/bmp': 'bmp',\n                        'image/tiff': 'tiff',\n                        'image/tif': 'tif',\n                        'image/photoshop': 'psd',\n                        'image/xcf': 'xcf',\n                        'image/pcx': 'pcx',\n                        'video/x-msvideo': 'avi',\n                        'video/mpeg': 'mpg',\n                        'video/x-flash': 'flv',\n                        'video/x-ms-wmv': 'wmv',\n                        'video/mp4': 'mp4',\n                        'video/3gpp': '3gp',\n                        'audio/wav': 'wav',\n                        'audio/mpeg': 'mp3',\n                        'audio/mid': 'mid',\n                        'audio/ogg': 'ogg',\n                        'audio/aiff': 'aif',\n                        'audio/basic': 'au',\n                        'audio/voxware': 'vox',\n                        'audio/x-ms-wma': 'wma',\n                        'audio/x-pn-realaudi': 'ram',\n                        'application/vnd.oasis.opendocument.text': 'odt',\n                        'application/vnd.oasis.opendocument.text-template': 'ott',\n                        'application/vnd.oasis.opendocument.text-web': 'oth',\n                        'application/vnd.oasis.opendocument.text-master': 'odm',\n                        'application/vnd.oasis.opendocument.graphics': 'odg',\n                        'application/vnd.oasis.opendocument.graphics-template': 'otg',\n                        'application/vnd.oasis.opendocument.presentation': 'odp',\n                        'application/vnd.oasis.opendocument.presentation-template': 'otp',\n                        'application/vnd.oasis.opendocument.spreadsheet': 'ods',\n                        'application/vnd.oasis.opendocument.spreadsheet-template': 'ots',\n                        'application/vnd.oasis.opendocument.chart': 'odc',\n                        'application/vnd.oasis.opendocument.formula': 'odf',\n                        'application/vnd.oasis.opendocument.database': 'odb',\n                        'application/vnd.oasis.opendocument.image': 'odi',\n                        'application/vnd.ms-powerpoint': 'ppt',\n                        'application/msword': 'doc',\n                        'application/vnd.ms-word.document.macroEnabled.12': 'docm',\n                        'application/vnd.openxmlformats-officedocument.wordprocessingml.document': 'docx',\n                        'application/vnd.ms-word.template.macroEnabled.12': 'dotm',\n                        'application/vnd.openxmlformats-officedocument.wordprocessingml.template': 'dotx',\n                        'application/vnd.ms-powerpoint.slideshow.macroEnabled.12': 'ppsm',\n                        'application/vnd.openxmlformats-officedocument.presentationml.slideshow': 'ppsx',\n                        'application/vnd.ms-powerpoint.presentation.macroEnabled.12': 'pptm',\n                        'application/vnd.openxmlformats-officedocument.presentationml.presentation': 'pptx',\n                        'application/vnd.ms-excel.sheet.binary.macroEnabled.12': 'xlsb',\n                        'application/vnd.ms-excel.sheet.macroEnabled.12': 'xlsm',\n                        'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': 'xlsx',\n                        'application/vnd.ms-xpsdocument': 'xps',\n                        'application/vnd.ms-excel': 'xls',\n                        'text/plain': 'txt',\n                        'application/pdf': 'pdf',\n                        'application/zip': 'zip',\n                        'application/epub+zip': 'epub',\n                        'text/xml': 'xml',\n                        'application/vnd.apple.pages': 'pages',\n                        'application/vnd.apple.keynote': 'keynote',\n                        'application/vnd.apple.numbers': 'numbers',\n                    };\n                    if (typeMap[mimeType]) {\n                        filename += '.' + typeMap[mimeType];\n                    }\n                }\n                window.document.getElementById('id_edu_url').value = node.downloadUrl;\n                window.document.getElementById('id_edu_filename').value = filename;\n                window.removeEventListener('message', handleRepo, false);\n            }\n        }, false);\n        window.win = window.open(repoUrl);\n    };\n    const repoButton = document.getElementById('id_searchbutton');\n    repoButton.addEventListener(\"click\", onClick);\n    const removeButton = document.getElementById('id_eduRemoveButton');\n    if (removeButton !== null) {\n        const removeCallback = () => {\n            window.document.getElementById('id_edu_filename').value = '';\n            window.document.getElementById('id_edu_url').value = '';\n        };\n        removeButton.addEventListener(\"click\", removeCallback);\n    }\n};\n\n"],"names":["repoUrl","document","getElementById","addEventListener","window","console","log","handleRepo","event","data","node","win","close","filename","properties","extension","split","pop","length","mimeType","mimetype","typeMap","value","downloadUrl","removeEventListener","open","removeButton","removeCallback"],"mappings":"+KACoBA,UAqFGC,SAASC,eAAe,mBAChCC,iBAAiB,SArFZ,KACZC,OAAOC,QAAQC,IAAI,SACnBF,OAAOD,iBAAiB,WAAW,SAASI,WAAWC,UAC1B,eAArBA,MAAMC,KAAKD,MAAwB,OAC7BE,KAAOF,MAAMC,KAAKA,KACxBL,OAAOO,IAAIC,YACPC,SAAWH,KAAKI,WAAW,WAAW,GACtCC,UAAYF,SAASG,MAAM,KAAKC,UAC/BF,WAAkC,IAArBA,UAAUG,OAAc,OAChCC,SAAWT,KAAKU,SAChBC,QAAU,cACE,mBACD,kBACA,kBACA,mBACC,mBACD,wBACM,kBACN,kBACA,wBACM,mBACL,sBACG,uBACC,kBACL,mBACC,kBACD,mBACC,kBACD,kBACA,mBACC,oBACC,qBACE,uBACC,4BACK,gDACoB,yDACS,oDACL,uDACG,oDACH,6DACS,wDACL,iEACS,uDACV,gEACS,iDACf,mDACE,oDACC,iDACH,sCACX,2BACX,yDAC8B,iFACuB,0DACvB,iFACuB,iEAChB,gFACe,oEACZ,mFACe,+DACpB,wDACP,2EACmB,wCACnC,iCACN,mBACd,wBACK,wBACA,6BACK,kBACZ,oCACmB,wCACE,0CACA,WAEjCA,QAAQF,YACRN,UAAY,IAAMQ,QAAQF,WAGlCf,OAAOH,SAASC,eAAe,cAAcoB,MAAQZ,KAAKa,YAC1DnB,OAAOH,SAASC,eAAe,mBAAmBoB,MAAQT,SAC1DT,OAAOoB,oBAAoB,UAAWjB,YAAY,OAEvD,GACHH,OAAOO,IAAMP,OAAOqB,KAAKzB,kBAIvB0B,aAAezB,SAASC,eAAe,yBACxB,OAAjBwB,aAAuB,OACjBC,eAAiB,KACnBvB,OAAOH,SAASC,eAAe,mBAAmBoB,MAAQ,GAC1DlB,OAAOH,SAASC,eAAe,cAAcoB,MAAQ,IAEzDI,aAAavB,iBAAiB,QAASwB"}